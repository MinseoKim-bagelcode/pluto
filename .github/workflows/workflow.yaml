name: Pluto

on:
  push:
    paths:
      - "**/*.yml"
      - "**/*.yaml"
  workflow_dispatch:

jobs:
  checking deprecated kube api:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Install Pluto
        uses: FairwindsOps/pluto/github-action@master

      # pluto/kubernetes 디렉토리 전체를 검사 (권장)
      - name: Scanning for deprecated Kubernetes API
        run: |
          pluto detect-files -d pluto/kubernetes -owide
